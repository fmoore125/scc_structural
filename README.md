# Structural Determinants of the Social Cost of Carbon

This repository provides reproduction code and supplementary analysis
for the paper "Synthesis of evidence yields high social cost of carbon
due to structural model variation and uncertainties" by Moore et al.

## Organization of the Repository

The repository contains input data and the code used to perform the
analysis, as well as some outputs. The following directories are at
the root of the repository:

 - `data/`: Inputs (not generated by the code)
 - `figures/`: Output figures (generated by the code)
 - `saved-outputs/`: Output data (generated by the code), provided for
   convenience so they do not need to be regenerated.
 - `src/`: The code used to analyse the data

The scripts in the `src/` directory perform analysis, produce figures,
or provide services to other scripts, as follows:

- `src/abstract_search`: Facilitates the abstract search process (see
  `2. Abstract search process`) below.
- `src/analysis`: Performs various analyses of the SCC estimates.
- `src/data_cleaning_scripts`: Load and clean data
  "on-the-fly". `cleaning_master.R` is used by all analysis scripts to
  load the SCC estimates, and this calls the other scripts in that
  directory, each of which hands a specific data cleaning issue.
- `src/figures`: Scripts specifically intended to produce paper
  figures.
- `src/survey_analysis`: Performs various analyses of the expert
  survey results.

## Reproduction Process

The R scripts all assume that the current working directory (e.g., as
set by `setwd`) is the root directory of the github repository.

### 1. Preparing the `outputs` directory

You may either generate results from scratch (option 1) or use
pre-generated outputs (option 2).

For both approaches, start by creating an `outputs` directory in the
root directory of the repository.

#### (Option 2) Restoring pre-generated outputs

Copy the contents of `saved-outputs` to new `outputs` directory.

Download the results from
[https://drive.google.com/drive/folders/1MiwK6dKQWSTOG_3LINeixzGkbgWVR-pZ?usp=sharing]
and place these files in a directory named `Structural SCC RF
Experiments` within the `outputs` directory.

### 2. Abstract search process

The scripts in `src/abstract_search` facilitate the abstract search
process. The results of this process are already in
`data/abstract_search/compiledpapers_20200930_finalreview.csv`, as
inputs to the paper's analysis, and these steps can be skipped.

1. `01_uniquepapers.R`: Generates the unique list of papers from the
  initial word search of the databases (drawn from the files in the
  `data/abstract_search` directory). This is saved as
  `outputs/abstract_search/compiledpapers_20200930_finalreview.csv`.
2. The abstract review process consists of filling out additional
   columns in this file, and this must now be done. See the result in
   `data/abstract_search/compiledpapers_20200930_finalreview.csv`. Or
   you can just use that file. If a new file is created as a result of
   additional review, save this over the existing
   `data/abstract_search/compiledpapers_20200930_finalreview.csv`
   file.
3. `02_aggregatestats_filtering.R`: Performs some checks on the
   abstract review process.
4. `03_postabstract.R`: Generates an additional list of abstracts to
   check, based on more recent literature. These should be added to
   the `data/abstract_search/compiledpapers_20200930_finalreview.csv`
   if it is being regenerated.
   
